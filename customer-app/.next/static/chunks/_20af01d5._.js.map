{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Pee10/Desktop/New%20Folder%20%283%29/Prime%20Pillars/customer-app/lib/api.ts"],"sourcesContent":["const BASE_URL = 'http://localhost:5000'\r\n\r\nconst buildUrl = (path: string) => `${BASE_URL}${path}`\r\n\r\nconst handleResponse = async (res: Response) => {\r\n  if (!res.ok) {\r\n    const error = await res.json().catch(() => ({}))\r\n    throw new Error(error.error || 'An unexpected error occurred')\r\n  }\r\n  return res.json()\r\n}\r\n\r\nexport async function apiGet<T = any>(path: string): Promise<T> {\r\n  const res = await fetch(buildUrl(path), {\r\n    method: 'GET',\r\n    credentials: 'include',\r\n  })\r\n  return handleResponse(res)\r\n}\r\n\r\nexport async function apiPost<T = any>(path: string, data: Record<string, any>): Promise<T> {\r\n  const res = await fetch(buildUrl(path), {\r\n    method: 'POST',\r\n    credentials: 'include',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify(data),\r\n  })\r\n  return handleResponse(res)\r\n}\r\n\r\n/**\r\n * Submits the application form along with required and optional documents + passport.\r\n */\r\nexport async function submitApplication(\r\n  form: Record<string, any>,\r\n  requiredDocs: Record<string, File | null>,\r\n  optionalDocs: { title: string; file: File | null }[],\r\n  passport?: File | null\r\n): Promise<any> {\r\n  const formData = new FormData()\r\n\r\n  formData.append('pen_number', form.penNumber)\r\n  formData.append('pfa', form.pfa)\r\n  formData.append('rsa_balance', form.rsaBalance)\r\n  formData.append('bvn', form.bvn)\r\n  formData.append('nin', form.nin)\r\n  formData.append('dob', form.dob)\r\n  formData.append('phone_number', form.phone1)\r\n  formData.append('alt_phone', form.phone2)\r\n  formData.append('alt_email', form.altEmail)\r\n\r\n  Object.entries(requiredDocs).forEach(([title, file]) => {\r\n    if (file) {\r\n      formData.append('documents', file, title)\r\n    }\r\n  })\r\n\r\n  optionalDocs.forEach(({ title, file }) => {\r\n    if (file && title) {\r\n      formData.append('documents', file, `optional:${title}`)\r\n    }\r\n  })\r\n\r\n  if (passport) {\r\n    formData.append('passport', passport)\r\n  }\r\n\r\n  const res = await fetch(buildUrl('/api/application/submit'), {\r\n    method: 'POST',\r\n    credentials: 'include',\r\n    body: formData,\r\n  })\r\n\r\n  return handleResponse(res)\r\n}\r\n\r\nexport async function fetchCurrentUser(): Promise<any> {\r\n  return apiGet('/api/auth/me')\r\n}\r\n\r\nexport async function loginUser(data: {\r\n  pen_number: string\r\n  password: string\r\n}): Promise<any> {\r\n  return apiPost('/api/auth/login', data)\r\n}\r\n\r\nexport async function registerUser(data: {\r\n  first_name: string\r\n  surname: string\r\n  other_names?: string\r\n  email: string\r\n  pen_number: string\r\n  password: string\r\n}): Promise<any> {\r\n  return apiPost('/api/auth/register', data)\r\n}\r\n"],"names":[],"mappings":";;;;;;;;AAAA,MAAM,WAAW;AAEjB,MAAM,WAAW,CAAC,OAAiB,GAAG,WAAW,MAAM;AAEvD,MAAM,iBAAiB,OAAO;IAC5B,IAAI,CAAC,IAAI,EAAE,EAAE;QACX,MAAM,QAAQ,MAAM,IAAI,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC,CAAC,CAAC;QAC9C,MAAM,IAAI,MAAM,MAAM,KAAK,IAAI;IACjC;IACA,OAAO,IAAI,IAAI;AACjB;AAEO,eAAe,OAAgB,IAAY;IAChD,MAAM,MAAM,MAAM,MAAM,SAAS,OAAO;QACtC,QAAQ;QACR,aAAa;IACf;IACA,OAAO,eAAe;AACxB;AAEO,eAAe,QAAiB,IAAY,EAAE,IAAyB;IAC5E,MAAM,MAAM,MAAM,MAAM,SAAS,OAAO;QACtC,QAAQ;QACR,aAAa;QACb,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,MAAM,KAAK,SAAS,CAAC;IACvB;IACA,OAAO,eAAe;AACxB;AAKO,eAAe,kBACpB,IAAyB,EACzB,YAAyC,EACzC,YAAoD,EACpD,QAAsB;IAEtB,MAAM,WAAW,IAAI;IAErB,SAAS,MAAM,CAAC,cAAc,KAAK,SAAS;IAC5C,SAAS,MAAM,CAAC,OAAO,KAAK,GAAG;IAC/B,SAAS,MAAM,CAAC,eAAe,KAAK,UAAU;IAC9C,SAAS,MAAM,CAAC,OAAO,KAAK,GAAG;IAC/B,SAAS,MAAM,CAAC,OAAO,KAAK,GAAG;IAC/B,SAAS,MAAM,CAAC,OAAO,KAAK,GAAG;IAC/B,SAAS,MAAM,CAAC,gBAAgB,KAAK,MAAM;IAC3C,SAAS,MAAM,CAAC,aAAa,KAAK,MAAM;IACxC,SAAS,MAAM,CAAC,aAAa,KAAK,QAAQ;IAE1C,OAAO,OAAO,CAAC,cAAc,OAAO,CAAC,CAAC,CAAC,OAAO,KAAK;QACjD,IAAI,MAAM;YACR,SAAS,MAAM,CAAC,aAAa,MAAM;QACrC;IACF;IAEA,aAAa,OAAO,CAAC,CAAC,EAAE,KAAK,EAAE,IAAI,EAAE;QACnC,IAAI,QAAQ,OAAO;YACjB,SAAS,MAAM,CAAC,aAAa,MAAM,CAAC,SAAS,EAAE,OAAO;QACxD;IACF;IAEA,IAAI,UAAU;QACZ,SAAS,MAAM,CAAC,YAAY;IAC9B;IAEA,MAAM,MAAM,MAAM,MAAM,SAAS,4BAA4B;QAC3D,QAAQ;QACR,aAAa;QACb,MAAM;IACR;IAEA,OAAO,eAAe;AACxB;AAEO,eAAe;IACpB,OAAO,OAAO;AAChB;AAEO,eAAe,UAAU,IAG/B;IACC,OAAO,QAAQ,mBAAmB;AACpC;AAEO,eAAe,aAAa,IAOlC;IACC,OAAO,QAAQ,sBAAsB;AACvC","debugId":null}},
    {"offset": {"line": 91, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Pee10/Desktop/New%20Folder%20%283%29/Prime%20Pillars/customer-app/app/%28client%29/%5BpenNumber%5D/page.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useEffect, useState } from 'react'\r\nimport { useParams } from 'next/navigation'\r\nimport { apiGet } from '@/lib/api'\r\n\r\nexport default function ClientProfile() {\r\n  const { penNumber } = useParams<{ penNumber: string }>()\r\n  const [client, setClient] = useState<any>(null)\r\n  const [loading, setLoading] = useState(true)\r\n\r\n  useEffect(() => {\r\n    const fetchClient = async () => {\r\n      try {\r\n        const data = await apiGet(`/api/dashboard/client/${penNumber}`)\r\n        setClient(data)\r\n      } catch (err) {\r\n        console.error(err)\r\n      } finally {\r\n        setLoading(false)\r\n      }\r\n    }\r\n    fetchClient()\r\n  }, [penNumber])\r\n\r\n  if (loading) return <p className=\"text-center mt-10\">Loading...</p>\r\n  if (!client) return <p className=\"text-center mt-10\">Client not found.</p>\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-100\">\r\n      <header className=\"bg-gradient-to-r from-[#0057A0] to-[#C8102E] text-white py-6 text-center\">\r\n        <h1 className=\"text-2xl font-bold\">Client Profile</h1>\r\n      </header>\r\n\r\n      <div className=\"max-w-4xl mx-auto my-10 bg-white p-8 rounded-md shadow\">\r\n        <section className=\"mb-10\">\r\n          <h2 className=\"text-xl font-semibold text-[#0057A0] border-b pb-2\">Biodata</h2>\r\n          <div className=\"grid md:grid-cols-2 gap-4 mt-4\">\r\n            <div>\r\n              <p><strong>Full Name:</strong> {client.full_name}</p>\r\n              <p><strong>PFA:</strong> {client.pfa}</p>\r\n              <p><strong>RSA Balance:</strong> {client.rsa_balance}</p>\r\n              <p><strong>Email:</strong> {client.email}</p>\r\n              <p><strong>Alt Email:</strong> {client.alt_email}</p>\r\n            </div>\r\n            <div className=\"flex flex-col items-center\">\r\n              <p className=\"mb-2 font-medium\">Passport Photo</p>\r\n              <img\r\n                src={`/uploads/passport-${penNumber}.jpg`} // Assuming this naming convention\r\n                alt=\"Passport\"\r\n                className=\"w-28 h-36 object-cover border rounded\"\r\n              />\r\n            </div>\r\n          </div>\r\n        </section>\r\n\r\n        <section className=\"mb-10\">\r\n          <h2 className=\"text-xl font-semibold text-[#0057A0] border-b pb-2\">Uploaded Documents</h2>\r\n          <ul className=\"list-disc ml-5 mt-4 space-y-1\">\r\n            {client.documents.map((doc: any) => (\r\n              <li key={doc.id}>\r\n                <a href={doc.url} target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-blue-600 underline\">\r\n                  {doc.title}\r\n                </a> ({doc.status})\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        </section>\r\n\r\n        <section className=\"mb-10\">\r\n          <h2 className=\"text-xl font-semibold text-[#0057A0] border-b pb-2\">Allocated House</h2>\r\n          <p><strong>House Type:</strong> 2 Bedroom Detached</p>\r\n          <p><strong>House Number:</strong> 11A</p>\r\n          <p><strong>Estate:</strong> Harmony Estate, Kaduna</p>\r\n        </section>\r\n\r\n        <section>\r\n          <h2 className=\"text-xl font-semibold text-[#0057A0] border-b pb-2\">Status</h2>\r\n          <p><strong>Application Status:</strong> Approved</p>\r\n        </section>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;;;AAJA;;;;AAMe,SAAS;;IACtB,MAAM,EAAE,SAAS,EAAE,GAAG,CAAA,GAAA,qIAAA,CAAA,YAAS,AAAD;IAC9B,MAAM,CAAC,QAAQ,UAAU,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAO;IAC1C,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAE;IAEvC,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;mCAAE;YACR,MAAM;uDAAc;oBAClB,IAAI;wBACF,MAAM,OAAO,MAAM,CAAA,GAAA,6GAAA,CAAA,SAAM,AAAD,EAAE,CAAC,sBAAsB,EAAE,WAAW;wBAC9D,UAAU;oBACZ,EAAE,OAAO,KAAK;wBACZ,QAAQ,KAAK,CAAC;oBAChB,SAAU;wBACR,WAAW;oBACb;gBACF;;YACA;QACF;kCAAG;QAAC;KAAU;IAEd,IAAI,SAAS,qBAAO,6LAAC;QAAE,WAAU;kBAAoB;;;;;;IACrD,IAAI,CAAC,QAAQ,qBAAO,6LAAC;QAAE,WAAU;kBAAoB;;;;;;IAErD,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAO,WAAU;0BAChB,cAAA,6LAAC;oBAAG,WAAU;8BAAqB;;;;;;;;;;;0BAGrC,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAQ,WAAU;;0CACjB,6LAAC;gCAAG,WAAU;0CAAqD;;;;;;0CACnE,6LAAC;gCAAI,WAAU;;kDACb,6LAAC;;0DACC,6LAAC;;kEAAE,6LAAC;kEAAO;;;;;;oDAAmB;oDAAE,OAAO,SAAS;;;;;;;0DAChD,6LAAC;;kEAAE,6LAAC;kEAAO;;;;;;oDAAa;oDAAE,OAAO,GAAG;;;;;;;0DACpC,6LAAC;;kEAAE,6LAAC;kEAAO;;;;;;oDAAqB;oDAAE,OAAO,WAAW;;;;;;;0DACpD,6LAAC;;kEAAE,6LAAC;kEAAO;;;;;;oDAAe;oDAAE,OAAO,KAAK;;;;;;;0DACxC,6LAAC;;kEAAE,6LAAC;kEAAO;;;;;;oDAAmB;oDAAE,OAAO,SAAS;;;;;;;;;;;;;kDAElD,6LAAC;wCAAI,WAAU;;0DACb,6LAAC;gDAAE,WAAU;0DAAmB;;;;;;0DAChC,6LAAC;gDACC,KAAK,CAAC,kBAAkB,EAAE,UAAU,IAAI,CAAC;gDACzC,KAAI;gDACJ,WAAU;;;;;;;;;;;;;;;;;;;;;;;;kCAMlB,6LAAC;wBAAQ,WAAU;;0CACjB,6LAAC;gCAAG,WAAU;0CAAqD;;;;;;0CACnE,6LAAC;gCAAG,WAAU;0CACX,OAAO,SAAS,CAAC,GAAG,CAAC,CAAC,oBACrB,6LAAC;;0DACC,6LAAC;gDAAE,MAAM,IAAI,GAAG;gDAAE,QAAO;gDAAS,KAAI;gDAAsB,WAAU;0DACnE,IAAI,KAAK;;;;;;4CACR;4CAAG,IAAI,MAAM;4CAAC;;uCAHX,IAAI,EAAE;;;;;;;;;;;;;;;;kCASrB,6LAAC;wBAAQ,WAAU;;0CACjB,6LAAC;gCAAG,WAAU;0CAAqD;;;;;;0CACnE,6LAAC;;kDAAE,6LAAC;kDAAO;;;;;;oCAAoB;;;;;;;0CAC/B,6LAAC;;kDAAE,6LAAC;kDAAO;;;;;;oCAAsB;;;;;;;0CACjC,6LAAC;;kDAAE,6LAAC;kDAAO;;;;;;oCAAgB;;;;;;;;;;;;;kCAG7B,6LAAC;;0CACC,6LAAC;gCAAG,WAAU;0CAAqD;;;;;;0CACnE,6LAAC;;kDAAE,6LAAC;kDAAO;;;;;;oCAA4B;;;;;;;;;;;;;;;;;;;;;;;;;AAKjD;GA7EwB;;QACA,qIAAA,CAAA,YAAS;;;KADT","debugId":null}}]
}