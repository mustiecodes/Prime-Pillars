{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Desktop/Important/Projects/Clients/Prime%20Pillars/customer-app/app/%28client%29/page.tsx"],"sourcesContent":["'use client'\n\nimport { useState, useEffect } from 'react'\n\nconst REQUIRED_DOCS = [\n  'Account Opening Form',\n  'NIN Slip',\n  'Undertaken Form',\n  'Consent Form',\n  'Indemnity Form',\n  'Application Letter',\n]\n\nexport default function ClientApplicationForm() {\n  const [form, setForm] = useState({\n    firstName: '',\n    surname: '',\n    otherNames: '',\n    pfa: '',\n    rsaBalance: '',\n    bvn: '',\n    nin: '',\n    dob: '',\n    phone1: '',\n    phone2: '',\n    altEmail: '',\n  })\n\n  const [requiredDocs, setRequiredDocs] = useState<{ [key: string]: File | null }>({})\n  const [optionalDocs, setOptionalDocs] = useState([{ title: '', file: null as File | null }])\n  const [submitting, setSubmitting] = useState(false)\n  const [message, setMessage] = useState('')\n\n  useEffect(() => {\n    fetch('http://localhost:5000/api/auth/me', {\n      credentials: 'include',\n    })\n      .then(async (res) => {\n        if (!res.ok) throw new Error('Unauthorized')\n        const user = await res.json()\n\n        if (user.role !== 'client') {\n          window.location.href = '/'\n          return\n        }\n\n        setForm((prev) => ({\n          ...prev,\n          firstName: user.first_name || '',\n          surname: user.surname || '',\n          otherNames: user.other_names || '',\n          pfa: user.pfa || '',\n          rsaBalance: user.rsa_balance || '',\n          bvn: user.bvn || '',\n          nin: user.nin || '',\n          dob: user.dob || '',\n          phone1: user.phone_number || '',\n          phone2: user.alt_phone || '',\n          altEmail: user.alt_email || '',\n        }))\n      })\n      .catch(() => {\n        window.location.href = '/login'\n      })\n  }, [])\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>) => {\n    const { name, value } = e.target\n    setForm((prev) => ({ ...prev, [name]: value }))\n  }\n\n  const handleRequiredDocUpload = (docType: string, file: File | null) => {\n    setRequiredDocs((prev) => ({ ...prev, [docType]: file }))\n  }\n\n  const handleOptionalDocChange = (index: number, key: 'title' | 'file', value: any) => {\n    const docs = [...optionalDocs]\n    docs[index][key] = value\n    setOptionalDocs(docs)\n  }\n\n  const addOptionalDoc = () => {\n    setOptionalDocs([...optionalDocs, { title: '', file: null }])\n  }\n\n  const handleSubmit = async () => {\n    const formData = new FormData()\n    Object.entries(form).forEach(([key, value]) => formData.append(key, value))\n\n    REQUIRED_DOCS.forEach((docTitle) => {\n      const file = requiredDocs[docTitle]\n      if (file) formData.append('documents', file, `${docTitle}`)\n    })\n\n    optionalDocs.forEach(({ title, file }) => {\n      if (file && title) {\n        formData.append('documents', file, `optional:${title}`)\n      }\n    })\n\n    setSubmitting(true)\n    setMessage('')\n    try {\n      const res = await fetch('http://localhost:5000/api/client/apply', {\n        method: 'POST',\n        credentials: 'include',\n        body: formData,\n      })\n      if (!res.ok) throw new Error('Submission failed')\n      setMessage('✅ Application submitted successfully!')\n    } catch (err) {\n      setMessage('❌ Could not submit application.')\n    } finally {\n      setSubmitting(false)\n    }\n  }\n\n  return (\n    <div className=\"max-w-4xl mx-auto bg-white shadow rounded-lg p-6\">\n      <h2 className=\"text-2xl font-semibold mb-4\">Apply for Housing</h2>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n        <Input label=\"First Name\" name=\"firstName\" value={form.firstName} disabled />\n        <Input label=\"Surname\" name=\"surname\" value={form.surname} disabled />\n        <Input label=\"Other Names (Optional)\" name=\"otherNames\" value={form.otherNames} disabled />\n        <Select label=\"PFA\" name=\"pfa\" value={form.pfa} onChange={handleChange}>\n          <option value=\"\">-- Select PFA --</option>\n          <option value=\"ARM Pensions\">ARM Pensions</option>\n          <option value=\"Stanbic IBTC\">Stanbic IBTC</option>\n          <option value=\"Trustfund Pensions\">Trustfund Pensions</option>\n        </Select>\n        <Input label=\"RSA Balance\" name=\"rsaBalance\" type=\"number\" onChange={handleChange} />\n        <Input label=\"BVN\" name=\"bvn\" onChange={handleChange} />\n        <Input label=\"NIN\" name=\"nin\" onChange={handleChange} />\n        <Input label=\"Date of Birth\" name=\"dob\" type=\"date\" onChange={handleChange} />\n        <Input label=\"Phone Number\" name=\"phone1\" onChange={handleChange} />\n        <Input label=\"Alt Phone Number\" name=\"phone2\" onChange={handleChange} />\n        <Input label=\"Alt Email\" name=\"altEmail\" type=\"email\" onChange={handleChange} />\n      </div>\n\n      <hr className=\"my-6\" />\n      <h3 className=\"text-lg font-semibold mb-2\">Mandatory Documents</h3>\n      <div className=\"space-y-4\">\n        {REQUIRED_DOCS.map((doc) => (\n          <div key={doc}>\n            <label className=\"block mb-1 text-sm font-medium text-gray-700\">{doc}</label>\n            <input type=\"file\" required onChange={(e) => handleRequiredDocUpload(doc, e.target.files?.[0] || null)} />\n          </div>\n        ))}\n      </div>\n\n      <hr className=\"my-6\" />\n      <h3 className=\"text-lg font-semibold mb-2\">Optional Documents</h3>\n      {optionalDocs.map((doc, idx) => (\n        <div key={idx} className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-2\">\n          <input\n            type=\"text\"\n            placeholder=\"Document Title\"\n            className=\"border p-2 rounded\"\n            value={doc.title}\n            onChange={(e) => handleOptionalDocChange(idx, 'title', e.target.value)}\n          />\n          <input\n            type=\"file\"\n            onChange={(e) => handleOptionalDocChange(idx, 'file', e.target.files?.[0] || null)}\n          />\n        </div>\n      ))}\n      <button onClick={addOptionalDoc} className=\"text-blue-600 text-sm mb-4\">\n        + Add Another Optional Document\n      </button>\n\n      <button\n        onClick={handleSubmit}\n        disabled={submitting}\n        className={`w-full py-2 rounded-lg text-white ${submitting ? 'bg-gray-400' : 'bg-blue-600 hover:bg-blue-700'}`}\n      >\n        {submitting ? 'Submitting...' : 'Submit Application'}\n      </button>\n\n      {message && <p className=\"mt-4 text-sm text-gray-700\">{message}</p>}\n    </div>\n  )\n}\n\nfunction Input({ label, name, type = 'text', value, onChange, disabled = false }: any) {\n  return (\n    <div>\n      <label className=\"block text-sm font-medium text-gray-700 mb-1\">{label}</label>\n      <input\n        type={type}\n        name={name}\n        value={value}\n        onChange={onChange}\n        disabled={disabled}\n        className=\"w-full p-2 border border-gray-300 rounded-lg\"\n      />\n    </div>\n  )\n}\n\nfunction Select({ label, name, value, onChange, children }: any) {\n  return (\n    <div>\n      <label className=\"block text-sm font-medium text-gray-700 mb-1\">{label}</label>\n      <select\n        name={name}\n        value={value}\n        onChange={onChange}\n        className=\"w-full p-2 border border-gray-300 rounded-lg\"\n      >\n        {children}\n      </select>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}