{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 31, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Pee10/Desktop/New%20Folder%20%283%29/Prime%20Pillars/customer-app/lib/validators.ts"],"sourcesContent":["/**\r\n * Checks if a password is strong enough:\r\n * - Minimum 8 characters\r\n * - At least one uppercase letter\r\n * - At least one lowercase letter\r\n * - At least one digit\r\n * - At least one special character\r\n */\r\nexport function validatePassword(password: string): boolean {\r\n  const regex = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[@#$%^&+=!]).{8,}$/\r\n  return regex.test(password)\r\n}\r\n\r\n/**\r\n * Validates login form data.\r\n */\r\nexport function loginValidator(data: { pen_number: string; password: string }) {\r\n  const errors: Record<string, string> = {}\r\n\r\n  if (!data.pen_number) {\r\n    errors.pen_number = 'PEN number is required'\r\n  }\r\n\r\n  if (!data.password) {\r\n    errors.password = 'Password is required'\r\n  }\r\n\r\n  return errors\r\n}\r\n\r\n/**\r\n * Validates registration form data.\r\n */\r\nexport function registerValidator(data: {\r\n  first_name: string\r\n  surname: string\r\n  email: string\r\n  pen_number: string\r\n  password: string\r\n  confirm_password: string\r\n}) {\r\n  const errors: Record<string, string> = {}\r\n\r\n  if (!data.first_name) {\r\n    errors.first_name = 'First name is required'\r\n  }\r\n\r\n  if (!data.surname) {\r\n    errors.surname = 'Surname is required'\r\n  }\r\n\r\n  if (!data.email) {\r\n    errors.email = 'Email is required'\r\n  }\r\n\r\n  if (!data.pen_number) {\r\n    errors.pen_number = 'PEN number is required'\r\n  }\r\n\r\n  if (!data.password) {\r\n    errors.password = 'Password is required'\r\n  } else if (!validatePassword(data.password)) {\r\n    errors.password = 'Password must include uppercase, lowercase, number, and symbol'\r\n  }\r\n\r\n  if (data.password !== data.confirm_password) {\r\n    errors.confirm_password = 'Passwords do not match'\r\n  }\r\n\r\n  return errors\r\n}\r\n\r\n/**\r\n * Validates client application form fields.\r\n */\r\nexport function validateClientForm(data: {\r\n  rsaBalance: string\r\n  bvn: string\r\n  nin: string\r\n  dob: string\r\n  phone1: string\r\n  altEmail?: string\r\n}) {\r\n  const errors: Record<string, string> = {}\r\n\r\n  if (!data.rsaBalance) errors.rsaBalance = 'RSA balance is required'\r\n  if (!data.bvn) {\r\n    errors.bvn = 'BVN is required'\r\n  } else if (data.bvn.length !== 12) {\r\n    errors.bvn = 'BVN must be exactly 12 digits'\r\n  }\r\n\r\n  if (!data.nin) {\r\n    errors.nin = 'NIN is required'\r\n  } else if (data.nin.length !== 12) {\r\n    errors.nin = 'NIN must be exactly 12 digits'\r\n  }\r\n\r\n  if (!data.dob) errors.dob = 'Date of Birth is required'\r\n\r\n  if (!data.phone1) {\r\n    errors.phone1 = 'Phone number is required'\r\n  } else if (data.phone1.length !== 11) {\r\n    errors.phone1 = 'Phone number must be exactly 12 digits'\r\n  }\r\n\r\n  return errors\r\n}\r\n"],"names":[],"mappings":"AAAA;;;;;;;CAOC;;;;;;AACM,SAAS,iBAAiB,QAAgB;IAC/C,MAAM,QAAQ;IACd,OAAO,MAAM,IAAI,CAAC;AACpB;AAKO,SAAS,eAAe,IAA8C;IAC3E,MAAM,SAAiC,CAAC;IAExC,IAAI,CAAC,KAAK,UAAU,EAAE;QACpB,OAAO,UAAU,GAAG;IACtB;IAEA,IAAI,CAAC,KAAK,QAAQ,EAAE;QAClB,OAAO,QAAQ,GAAG;IACpB;IAEA,OAAO;AACT;AAKO,SAAS,kBAAkB,IAOjC;IACC,MAAM,SAAiC,CAAC;IAExC,IAAI,CAAC,KAAK,UAAU,EAAE;QACpB,OAAO,UAAU,GAAG;IACtB;IAEA,IAAI,CAAC,KAAK,OAAO,EAAE;QACjB,OAAO,OAAO,GAAG;IACnB;IAEA,IAAI,CAAC,KAAK,KAAK,EAAE;QACf,OAAO,KAAK,GAAG;IACjB;IAEA,IAAI,CAAC,KAAK,UAAU,EAAE;QACpB,OAAO,UAAU,GAAG;IACtB;IAEA,IAAI,CAAC,KAAK,QAAQ,EAAE;QAClB,OAAO,QAAQ,GAAG;IACpB,OAAO,IAAI,CAAC,iBAAiB,KAAK,QAAQ,GAAG;QAC3C,OAAO,QAAQ,GAAG;IACpB;IAEA,IAAI,KAAK,QAAQ,KAAK,KAAK,gBAAgB,EAAE;QAC3C,OAAO,gBAAgB,GAAG;IAC5B;IAEA,OAAO;AACT;AAKO,SAAS,mBAAmB,IAOlC;IACC,MAAM,SAAiC,CAAC;IAExC,IAAI,CAAC,KAAK,UAAU,EAAE,OAAO,UAAU,GAAG;IAC1C,IAAI,CAAC,KAAK,GAAG,EAAE;QACb,OAAO,GAAG,GAAG;IACf,OAAO,IAAI,KAAK,GAAG,CAAC,MAAM,KAAK,IAAI;QACjC,OAAO,GAAG,GAAG;IACf;IAEA,IAAI,CAAC,KAAK,GAAG,EAAE;QACb,OAAO,GAAG,GAAG;IACf,OAAO,IAAI,KAAK,GAAG,CAAC,MAAM,KAAK,IAAI;QACjC,OAAO,GAAG,GAAG;IACf;IAEA,IAAI,CAAC,KAAK,GAAG,EAAE,OAAO,GAAG,GAAG;IAE5B,IAAI,CAAC,KAAK,MAAM,EAAE;QAChB,OAAO,MAAM,GAAG;IAClB,OAAO,IAAI,KAAK,MAAM,CAAC,MAAM,KAAK,IAAI;QACpC,OAAO,MAAM,GAAG;IAClB;IAEA,OAAO;AACT","debugId":null}},
    {"offset": {"line": 109, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Pee10/Desktop/New%20Folder%20%283%29/Prime%20Pillars/customer-app/lib/api.ts"],"sourcesContent":["const BASE_URL = 'http://localhost:5000'\r\n\r\nconst buildUrl = (path: string) => `${BASE_URL}${path}`\r\n\r\nconst handleResponse = async (res: Response) => {\r\n  if (!res.ok) {\r\n    const error = await res.json().catch(() => ({}))\r\n    throw new Error(error.error || 'An unexpected error occurred')\r\n  }\r\n  return res.json()\r\n}\r\n\r\nexport async function apiGet<T = any>(path: string): Promise<T> {\r\n  const res = await fetch(buildUrl(path), {\r\n    method: 'GET',\r\n    credentials: 'include',\r\n  })\r\n  return handleResponse(res)\r\n}\r\n\r\nexport async function apiPost<T = any>(path: string, data: Record<string, any>): Promise<T> {\r\n  const res = await fetch(buildUrl(path), {\r\n    method: 'POST',\r\n    credentials: 'include',\r\n    headers: { 'Content-Type': 'application/json' },\r\n    body: JSON.stringify(data),\r\n  })\r\n  return handleResponse(res)\r\n}\r\n\r\nexport async function submitApplication(\r\n  form: Record<string, any>,\r\n  requiredDocs: Record<string, File | null>,\r\n  optionalDocs: { title: string; file: File | null }[]\r\n): Promise<any> {\r\n  const formData = new FormData()\r\n\r\n  formData.append('pen_number', form.penNumber)\r\n  formData.append('pfa', form.pfa)\r\n  formData.append('rsa_balance', form.rsaBalance)\r\n  formData.append('bvn', form.bvn)\r\n  formData.append('nin', form.nin)\r\n  formData.append('dob', form.dob)\r\n  formData.append('phone_number', form.phone1)\r\n  formData.append('alt_phone', form.phone2)\r\n  formData.append('alt_email', form.altEmail)\r\n\r\n  Object.entries(requiredDocs).forEach(([title, file]) => {\r\n    if (file) {\r\n      formData.append('documents', file, title)\r\n    }\r\n  })\r\n\r\n  optionalDocs.forEach(({ title, file }) => {\r\n    if (file && title) {\r\n      formData.append('documents', file, `optional:${title}`)\r\n    }\r\n  })\r\n\r\n  const res = await fetch(buildUrl('/api/application/submit'), {\r\n    method: 'POST',\r\n    credentials: 'include',\r\n    body: formData,\r\n  })\r\n  \r\n  return handleResponse(res)\r\n}\r\n\r\nexport async function fetchCurrentUser(): Promise<any> {\r\n  return apiGet('/api/auth/me')\r\n}\r\n\r\nexport async function loginUser(data: {\r\n  pen_number: string\r\n  password: string\r\n}): Promise<any> {\r\n  return apiPost('/api/auth/login', data)\r\n}\r\n\r\nexport async function registerUser(data: {\r\n  first_name: string\r\n  surname: string\r\n  other_names?: string\r\n  email: string\r\n  pen_number: string\r\n  password: string\r\n}): Promise<any> {\r\n  return apiPost('/api/auth/register', data)\r\n}\r\n"],"names":[],"mappings":";;;;;;;;AAAA,MAAM,WAAW;AAEjB,MAAM,WAAW,CAAC,OAAiB,GAAG,WAAW,MAAM;AAEvD,MAAM,iBAAiB,OAAO;IAC5B,IAAI,CAAC,IAAI,EAAE,EAAE;QACX,MAAM,QAAQ,MAAM,IAAI,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC,CAAC,CAAC;QAC9C,MAAM,IAAI,MAAM,MAAM,KAAK,IAAI;IACjC;IACA,OAAO,IAAI,IAAI;AACjB;AAEO,eAAe,OAAgB,IAAY;IAChD,MAAM,MAAM,MAAM,MAAM,SAAS,OAAO;QACtC,QAAQ;QACR,aAAa;IACf;IACA,OAAO,eAAe;AACxB;AAEO,eAAe,QAAiB,IAAY,EAAE,IAAyB;IAC5E,MAAM,MAAM,MAAM,MAAM,SAAS,OAAO;QACtC,QAAQ;QACR,aAAa;QACb,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,MAAM,KAAK,SAAS,CAAC;IACvB;IACA,OAAO,eAAe;AACxB;AAEO,eAAe,kBACpB,IAAyB,EACzB,YAAyC,EACzC,YAAoD;IAEpD,MAAM,WAAW,IAAI;IAErB,SAAS,MAAM,CAAC,cAAc,KAAK,SAAS;IAC5C,SAAS,MAAM,CAAC,OAAO,KAAK,GAAG;IAC/B,SAAS,MAAM,CAAC,eAAe,KAAK,UAAU;IAC9C,SAAS,MAAM,CAAC,OAAO,KAAK,GAAG;IAC/B,SAAS,MAAM,CAAC,OAAO,KAAK,GAAG;IAC/B,SAAS,MAAM,CAAC,OAAO,KAAK,GAAG;IAC/B,SAAS,MAAM,CAAC,gBAAgB,KAAK,MAAM;IAC3C,SAAS,MAAM,CAAC,aAAa,KAAK,MAAM;IACxC,SAAS,MAAM,CAAC,aAAa,KAAK,QAAQ;IAE1C,OAAO,OAAO,CAAC,cAAc,OAAO,CAAC,CAAC,CAAC,OAAO,KAAK;QACjD,IAAI,MAAM;YACR,SAAS,MAAM,CAAC,aAAa,MAAM;QACrC;IACF;IAEA,aAAa,OAAO,CAAC,CAAC,EAAE,KAAK,EAAE,IAAI,EAAE;QACnC,IAAI,QAAQ,OAAO;YACjB,SAAS,MAAM,CAAC,aAAa,MAAM,CAAC,SAAS,EAAE,OAAO;QACxD;IACF;IAEA,MAAM,MAAM,MAAM,MAAM,SAAS,4BAA4B;QAC3D,QAAQ;QACR,aAAa;QACb,MAAM;IACR;IAEA,OAAO,eAAe;AACxB;AAEO,eAAe;IACpB,OAAO,OAAO;AAChB;AAEO,eAAe,UAAU,IAG/B;IACC,OAAO,QAAQ,mBAAmB;AACpC;AAEO,eAAe,aAAa,IAOlC;IACC,OAAO,QAAQ,sBAAsB;AACvC","debugId":null}},
    {"offset": {"line": 187, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Pee10/Desktop/New%20Folder%20%283%29/Prime%20Pillars/customer-app/app/%28client%29/page.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { useState, useEffect } from 'react'\r\nimport { useRouter } from 'next/navigation'\r\nimport Link from 'next/link'\r\nimport toast from 'react-hot-toast'\r\n\r\nimport { loginValidator } from '@/lib/validators'\r\nimport { loginUser } from '@/lib/api'\r\nimport { useAuth } from '@/context/AuthProvider'\r\n\r\nexport default function Home() {\r\n  const router = useRouter()\r\n  const { user, refreshUser } = useAuth()\r\n\r\n  const [formData, setFormData] = useState({\r\n    pen_number: '',\r\n    password: '',\r\n  })\r\n\r\n  const [errors, setErrors] = useState<Record<string, string>>({})\r\n\r\n  useEffect(() => {\r\n    if (user) {\r\n      router.push('/dashboard') // Or home page for logged-in users\r\n    }\r\n  }, [user, router])\r\n\r\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    setFormData({ ...formData, [e.target.name]: e.target.value })\r\n    setErrors((prev) => ({ ...prev, [e.target.name]: '' }))\r\n  }\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault()\r\n\r\n    const newErrors = loginValidator(formData)\r\n    if (Object.keys(newErrors).length > 0) {\r\n      setErrors(newErrors)\r\n      return\r\n    }\r\n\r\n    try {\r\n      await loginUser(formData)\r\n      await refreshUser()\r\n      toast.success('Login successful')\r\n      // router.push('/dashboard')\r\n    } catch (error: any) {\r\n      toast.error(error.message || 'Invalid credentials')\r\n    }\r\n  }\r\n\r\n  return (\r\n    <main className=\"min-h-screen flex flex-col\">\r\n      <header className=\"bg-gradient-to-r from-[#0057A0] to-[#C8102E] text-white px-8 py-6 flex justify-between items-center\">\r\n        <h1 className=\"text-2xl font-bold\">Prime Pillars</h1>\r\n        <nav>\r\n          <ul className=\"flex gap-6 font-semibold\">\r\n            <li><Link href=\"#\">FAQs</Link></li>\r\n            <li><Link href=\"#\">Downloadable Forms</Link></li>\r\n            <li><Link href=\"#\">Contact Us</Link></li>\r\n          </ul>\r\n        </nav>\r\n      </header>\r\n\r\n      <section className=\"flex flex-1 justify-center items-center bg-[#f0f2f5] px-4\">\r\n        <div className=\"bg-white p-8 rounded-lg shadow-md max-w-xl w-full flex gap-8\">\r\n          <div className=\"w-2/5 flex justify-center items-center\">\r\n            <img src=\"https://via.placeholder.com/100x100.png?text=Logo\" alt=\"Logo\" className=\"max-w-[100px]\" />\r\n          </div>\r\n          <div className=\"w-3/5\">\r\n            <h2 className=\"text-2xl font-bold text-[#0057A0] mb-4\">Login</h2>\r\n            <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n              <div>\r\n                <label htmlFor=\"pen_number\" className=\"block font-semibold mb-1\">PEN Number</label>\r\n                <input\r\n                  type=\"text\"\r\n                  id=\"pen_number\"\r\n                  name=\"pen_number\"\r\n                  value={formData.pen_number}\r\n                  onChange={handleChange}\r\n                  className={`w-full px-3 py-2 border rounded-md ${errors.pen_number ? 'border-red-500' : 'border-gray-300'}`}\r\n                />\r\n                {errors.pen_number && (\r\n                  <p className=\"text-xs text-red-600 mt-1\">{errors.pen_number}</p>\r\n                )}\r\n              </div>\r\n              <div>\r\n                <label htmlFor=\"password\" className=\"block font-semibold mb-1\">Password</label>\r\n                <input\r\n                  type=\"password\"\r\n                  id=\"password\"\r\n                  name=\"password\"\r\n                  value={formData.password}\r\n                  onChange={handleChange}\r\n                  className={`w-full px-3 py-2 border rounded-md ${errors.password ? 'border-red-500' : 'border-gray-300'}`}\r\n                />\r\n                {errors.password && (\r\n                  <p className=\"text-xs text-red-600 mt-1\">{errors.password}</p>\r\n                )}\r\n              </div>\r\n              <button type=\"submit\" className=\"w-full bg-[#0057A0] text-white font-semibold py-2 rounded hover:bg-[#003f7a]\">Login</button>\r\n              <Link href=\"/register\">\r\n                <button type=\"button\" className=\"w-full bg-gray-200 text-gray-800 font-semibold py-2 rounded hover:bg-gray-300\">Register</button>\r\n              </Link>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </section>\r\n\r\n      <footer className=\"bg-gray-800 text-white text-center text-sm py-4\">\r\n        &copy; 2025 Prime Pillars Real Estate Development Company. All rights reserved.\r\n      </footer>\r\n    </main>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}}]
}